@if(chapter(); as chapter) {
<div class="chapter-page">
  <owl-novel-chapter-header
    [chapter]="chapter"
    (chapterNavigate)="goToChapter($event)"
    (titleChange)="updateChapterTitle($event)"
  >
  </owl-novel-chapter-header>
  <div class="chapter-page__scenes">
    <owl-novel-corkboard
      [items]="chapter.scenes"
      [addNewLabel]="'novel.chapter.newScene' | translate"
      [itemTemplate]="sceneTemplate"
      (addNew)="addSceneAt($event)"
      (moveItem)="moveScene($event)"
    ></owl-novel-corkboard>

    <ng-template #sceneTemplate let-item let-index="index">
      <owl-novel-scene-card
        [scene]="convertToScene(item)"
        [characters]="chapter.characters"
        (updateSceneTitle)="updateSceneTitle($event, item.id)"
        (updateSceneOutline)="updateSceneOutline($event, item.id)"
        (updateScenePov)="updateScenePov($event, item.id)"
        (deleteScene)="deleteScene(item.id)"
        (moveScene)="moveScene({ from: index, to: index + $event })"
        (transferScene)="transferScene(item.id)"
        (goTo)="goToScene(item.id)"
      ></owl-novel-scene-card>
    </ng-template>
  </div>
</div>
}
